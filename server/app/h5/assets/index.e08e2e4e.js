var ke=Object.defineProperty;var fe=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var ye=(t,o,c)=>o in t?ke(t,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[o]=c,ee=(t,o)=>{for(var c in o||(o={}))Ce.call(o,c)&&ye(t,c,o[c]);if(fe)for(var c of fe(o))Be.call(o,c)&&ye(t,c,o[c]);return t};import{I as Y,a as $,T as b,P as z,r as a,u as X,j as s,b as e,C as R,F as te,d as M,c as ue,e as F,D as Ee,f as L,K as Se,g as Ae,B as Q,h as De,N as ve,i as Te,k as $e,l as xe,q as Ie,M as Re,m as Me,n as We,o as se,p as je,s as Pe,S as Ye,R as ze,t as Le,v as qe,w as Ue}from"./vendor.3d579a3a.js";const Ke=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function c(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=c(n);fetch(n.href,r)}};Ke();var E=Y.createFromIconfont("//at.alicdn.com/t/font_2954539_gb7x8h90fq.js");$.defaults.baseURL="http://101.43.17.174:3000";$.defaults.withCredentials=!0;$.defaults.headers["X-Requested-With"]="XMLHttpRequest";$.defaults.headers.Authorization=`${localStorage.getItem("token")||null}`;$.defaults.headers.post["Content-Type"]="application/json";$.interceptors.response.use(t=>typeof t.data!="object"?(b.show("\u670D\u52A1\u7AEF\u5F02\u5E38\uFF01"),Promise.reject(t)):t.data.code*1!=1?(t.data.msg&&b.show(t.data.msg),+t.data.code==-1&&localStorage.removeItem("token"),Promise.reject(t.data)):t.data);const K=$.get,V=$.post,Z={normal:0,pull:1,drop:2,loading:3,success:4,failure:5},de={normal:0,abort:1,loading:2,success:3,failure:4,complete:5},ae={1:{icon:"icon-canyin1"},2:{icon:"icon-fushi"},3:{icon:"icon-jiaotong"},4:{icon:"icon-juanzhi"},5:{icon:"icon-gouwuchefill"},6:{icon:"icon-xuexi"},7:{icon:"icon-yaopin"},8:{icon:"icon-lvxing"},9:{icon:"icon-haoyou"},10:{icon:"icon-renminbi1"},11:{icon:"icon-qianbao1"},12:{icon:"icon-qiandai"},13:{icon:"icon-shenghuozhuanzhang"},14:{icon:"icon-licai"},15:{icon:"icon-tuikuanshouhou"},16:{icon:"icon-renminbi1"}},ge=t=>(t&&t.startsWith("http")||(t=`${MODE=="development"?"http://api.chennick.wang":baseUrl}${t}`),t),Oe="_item_mkxeh_1",He="_header-date_mkxeh_7",Xe="_date_mkxeh_18",Ge="_money_mkxeh_22",Je="_item-icon_mkxeh_37";var G={item:Oe,headerDate:He,date:Xe,money:Ge,itemIcon:Je};const be=({bill:t})=>{const[o,c]=a.exports.useState(0),[l,n]=a.exports.useState(0),r=X();a.exports.useEffect(()=>{const u=t.bills.filter(f=>f.pay_type==2).reduce((f,g)=>(f+=Number(g.amount),f),0);c(u);const h=t.bills.filter(f=>f.pay_type==1).reduce((f,g)=>(f+=Number(g.amount),f),0);n(h)},[t.bills]);const m=u=>{r.push(`/detail?id=${u.id}`)};return s("div",{className:G.item,children:[s("div",{className:G.headerDate,children:[e("div",{className:G.date,children:t.date}),s("div",{className:G.money,children:[s("span",{children:[e("img",{src:"//s.yezgea02.com/1615953405599/zhi%402x.png",alt:"\u652F"}),s("span",{children:["\xA5",l.toFixed(2)]})]}),s("span",{children:[e("img",{src:"//s.yezgea02.com/1615953405599/shou%402x.png",alt:"\u6536"}),s("span",{children:["\xA5",o.toFixed(2)]})]})]})]}),t&&t.bills.map(u=>e(R,{className:G.bill,onClick:()=>m(u),title:s(te,{children:[e(E,{className:G.itemIcon,type:u.type_id?ae[u.type_id].icon:1}),e("span",{children:u.type_name})]}),description:e("span",{style:{color:u.pay_type==2?"red":"#39be77"},children:`${u.pay_type==1?"-":"+"}${u.amount}`}),help:s("div",{children:[M(new Date(u.create_date).getTime()).format("HH:mm")," ",u.remark?`| ${u.remark}`:""]})},u.id))]})};be.propTypes={bill:z.object};const Qe="_popup-type_4v4ui_1",Ve="_header_4v4ui_7",Ze="_cross_4v4ui_20",et="_content_4v4ui_28",tt="_all_4v4ui_31",st="_title_4v4ui_38",at="_expense-wrap_4v4ui_43",nt="_income-wrap_4v4ui_44",ot="_active_4v4ui_58";var S={popupType:Qe,header:Ve,cross:Ze,content:et,all:tt,title:st,expenseWrap:at,incomeWrap:nt,active:ot};const we=a.exports.forwardRef(({onSelect:t},o)=>{const[c,l]=a.exports.useState(!1),[n,r]=a.exports.useState("all"),[m,u]=a.exports.useState([]),[h,f]=a.exports.useState([]);a.exports.useEffect(async()=>{const{data:{list:d}}=await K("/type/list");u(d.filter(x=>x.type==1)),f(d.filter(x=>x.type==2))},[]),o&&(o.current={show:()=>{l(!0)},close:()=>{l(!1)}});const g=d=>{r(d.id),l(!1),t(d)};return e(ue,{visible:c,direction:"bottom",onMaskClick:()=>l(!1),destroy:!1,mountContainer:()=>document.body,children:s("div",{className:S.popupType,children:[s("div",{className:S.header,children:["\u8BF7\u9009\u62E9\u7C7B\u578B",e(Y,{type:"wrong",className:S.cross,onClick:()=>l(!1)})]}),s("div",{className:S.content,children:[e("div",{onClick:()=>g({id:"all"}),className:F({[S.all]:!0,[S.active]:n=="all"}),children:"\u5168\u90E8\u7C7B\u578B"}),e("div",{className:S.title,children:"\u652F\u51FA"}),e("div",{className:S.expenseWrap,children:m.map((d,x)=>e("p",{onClick:()=>g(d),className:F({[S.active]:n==d.id}),children:d.name},x))}),e("div",{className:S.title,children:"\u6536\u5165"}),e("div",{className:S.incomeWrap,children:h.map((d,x)=>e("p",{onClick:()=>g(d),className:F({[S.active]:n==d.id}),children:d.name},x))})]})]})})});we.propTypes={onSelect:z.func};const ne=a.exports.forwardRef(({onSelect:t,mode:o="date"},c)=>{const[l,n]=a.exports.useState(!1),[r,m]=a.exports.useState(new Date),u=h=>{m(h),n(!1),o=="month"?t(M(h).format("YYYY-MM")):o=="date"&&t(M(h).format("YYYY-MM-DD"))};return c&&(c.current={show:()=>{n(!0)},close:()=>{n(!1)}}),e(ue,{visible:l,direction:"bottom",onMaskClick:()=>n(!1),destroy:!1,mountContainer:()=>document.body,children:e("div",{children:e(Ee,{visible:l,value:r,mode:o,onOk:u,onCancel:()=>n(!1)})})})});ne.propTypes={mode:z.string,onSelect:z.func};const ct="_add-wrap_bey74_1",rt="_header_bey74_7",it="_close_bey74_10",lt="_filter_bey74_15",ut="_type_bey74_21",dt="_expense_bey74_30",pt="_active_bey74_33",mt="_income_bey74_38",ht="_time_bey74_43",_t="_arrow_bey74_52",ft="_money_bey74_56",yt="_sufix_bey74_61",vt="_amount_bey74_66",xt="_type-warp_bey74_70",gt="_type-body_bey74_79",bt="_type-item_bey74_83",wt="_iconfont-wrap_bey74_90",Nt="_iconfont_bey74_90",Ft="_remark_bey74_116";var v={addWrap:ct,header:rt,close:it,filter:lt,type:ut,expense:dt,active:pt,income:mt,time:ht,arrow:_t,money:ft,sufix:yt,amount:vt,typeWarp:xt,typeBody:gt,typeItem:bt,iconfontWrap:wt,iconfont:Nt,remark:Ft};const pe=a.exports.forwardRef(({detail:t={},onReload:o},c)=>{const l=a.exports.useRef(),n=t&&t.id,[r,m]=a.exports.useState(!1),[u,h]=a.exports.useState("expense"),[f,g]=a.exports.useState([]),[d,x]=a.exports.useState([]),[w,y]=a.exports.useState({}),[N,W]=a.exports.useState(""),[q,D]=a.exports.useState(""),[O,j]=a.exports.useState(!1),[_,k]=a.exports.useState(new Date);a.exports.useEffect(()=>{t.id&&(h(t.pay_type==1?"expense":"income"),y({id:t.type_id,name:t.type_name}),D(t.remark),W(t.amount),k(M(Number(t.date)).$d))},[t]),c&&(c.current={show:()=>{m(!0)},close:()=>{m(!1)}}),a.exports.useEffect(async()=>{const{data:{list:i}}=await K("/type/list"),H=i.filter(le=>le.type==1),Fe=i.filter(le=>le.type==2);g(H),x(Fe),n||y(H[0])},[]);const P=i=>{h(i),i=="expense"?y(f[0]):y(d[0])},T=()=>{l.current&&l.current.show()},U=i=>{k(i)},ce=i=>{y(i)},re=i=>{if(console.log("\u70B9\u51FB"),i=String(i),i=="delete"){console.log("amount",N);let H=N.slice(0,N.length-1);W(H);return}if(i=="ok"){ie();return}i=="."&&N.includes(".")||i!="."&&N.includes(".")&&N&&N.split(".")[1].length>=2||W(N+i)},ie=async()=>{if(!N){b.show("\u8BF7\u8F93\u5165\u5177\u4F53\u91D1\u989D");return}const i={amount:Number(N).toFixed(2),type_id:w.id,type_name:w.name,date:M(_).unix()*1e3,pay_type:u=="expense"?1:2,remark:q||""};n?(i.id=n,await V("/bill/update",i),b.show("\u4FEE\u6539\u6210\u529F")):(await V("/bill/add",i),W(""),h("expense"),y(f[0]),k(new Date),D(""),b.show("\u6DFB\u52A0\u6210\u529F")),m(!1),o&&o()};return e(ue,{visible:r,direction:"bottom",onMaskClick:()=>m(!1),destroy:!1,mountContainer:()=>document.body,children:s("div",{className:v.addWrap,children:[e("header",{className:v.header,children:e("span",{className:v.close,onClick:()=>m(!1),children:e(Y,{type:"wrong"})})}),s("div",{className:v.filter,children:[s("div",{className:v.type,children:[e("span",{onClick:()=>P("expense"),className:F({[v.expense]:!0,[v.active]:u=="expense"}),children:"\u652F\u51FA"}),e("span",{onClick:()=>P("income"),className:F({[v.income]:!0,[v.active]:u=="income"}),children:"\u6536\u5165"})]}),s("div",{className:v.time,onClick:T,children:[M(_).format("MM-DD")," ",e(Y,{className:v.arrow,type:"arrow-bottom"})]})]}),s("div",{className:v.money,children:[e("span",{className:v.sufix,children:"\xA5"}),e("span",{className:F(v.amount,v.animation),children:N})]}),e("div",{className:v.typeWarp,children:e("div",{className:v.typeBody,children:(u=="expense"?f:d).map(i=>s("div",{onClick:()=>ce(i),className:v.typeItem,children:[e("span",{className:F({[v.iconfontWrap]:!0,[v.expense]:u=="expense",[v.income]:u=="income",[v.active]:w.id==i.id}),children:e(E,{className:v.iconfont,type:ae[i.id].icon})}),e("span",{children:i.name})]},i.id))})}),e("div",{className:v.remark,children:O?e(L,{autoHeight:!0,showLength:!0,maxLength:50,type:"text",rows:3,value:q,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u4FE1\u606F",onChange:i=>D(i),onBlur:()=>j(!1)}):e("span",{onClick:()=>j(!0),children:q||"\u6DFB\u52A0\u5907\u6CE8"})}),e(Se,{type:"price",onKeyClick:i=>re(i)}),e(ne,{ref:l,onSelect:U})]})})});pe.propTypes={detail:z.object,onReload:z.func};const kt="_home_1bx10_1",Ct="_header_1bx10_7",Bt="_data-wrap_1bx10_22",Et="_income_1bx10_33",St="_type-wrap_1bx10_36",At="_left_1bx10_48",Dt="_arrow_1bx10_51",Tt="_content-wrap_1bx10_55",$t="_add_1bx10_65";var C={home:kt,header:Ct,dataWrap:Bt,income:Et,typeWrap:St,left:At,arrow:Dt,contentWrap:Tt,add:$t};const It=()=>{const t=a.exports.useRef(),o=a.exports.useRef(),c=a.exports.useRef(),[l,n]=a.exports.useState(0),[r,m]=a.exports.useState(0),[u,h]=a.exports.useState({}),[f,g]=a.exports.useState(M().format("YYYY-MM")),[d,x]=a.exports.useState(1),[w,y]=a.exports.useState([]),[N,W]=a.exports.useState(0),[q,D]=a.exports.useState(Z.normal),[O,j]=a.exports.useState(de.normal);a.exports.useEffect(()=>{_(),console.log("typeRef",t)},[d,u,f]);const _=async()=>{const{data:i}=await K(`/bill/list?page_number=${d}&page_size=5&date=${f}&type_id=${u.id||""}`);d==1?y(i.list):y(w.concat(i.list)),n((i.totalExpense*1).toFixed(2)),m((i.totalIncome*1).toFixed(2)),W(i.totalPage),j(de.success),D(Z.success)},k=()=>{D(Z.loading),d!=1?x(1):_()},P=()=>{d<N&&(j(de.loading),x(d+1))},T=()=>{t.current&&t.current.show()},U=()=>{o.current&&o.current.show()},ce=i=>{D(Z.loading),x(1),h(i)},re=i=>{D(Z.loading),x(1),g(i)},ie=()=>{c.current&&c.current.show()};return s("div",{className:C.home,children:[s("div",{className:C.header,children:[s("div",{className:C.dataWrap,children:[s("span",{className:C.expense,children:["\u603B\u652F\u51FA\uFF1A",s("b",{children:["\xA5 ",l]})]}),s("span",{className:C.income,children:["\u603B\u6536\u5165\uFF1A",s("b",{children:["\xA5 ",r]})]})]}),s("div",{className:C.typeWrap,children:[e("div",{className:C.left,onClick:T,children:s("span",{className:C.title,children:[u.name||"\u5168\u90E8\u7C7B\u578B"," ",e(Y,{className:C.arrow,type:"arrow-bottom"})]})}),e("div",{className:C.right,children:s("span",{className:C.time,onClick:U,children:[f,e(Y,{className:C.arrow,type:"arrow-bottom"})]})})]})]}),e("div",{className:C.contentWrap,children:w.length?e(Ae,{animationDuration:200,stayTime:400,refresh:{state:q,handler:k},load:{state:O,distance:200,handler:P},children:w.map((i,H)=>e(be,{bill:i},H))}):null}),e("div",{className:C.add,onClick:ie,children:e(E,{type:"icon-jilu"})}),e(we,{ref:t,onSelect:ce}),e(ne,{ref:o,mode:"month",onSelect:re}),e(pe,{ref:c,onReload:k})]})},Rt="_user_2wwvo_1",Mt="_head_2wwvo_5",Wt="_info_2wwvo_14",jt="_content_2wwvo_33",Pt="_logout_2wwvo_43";var J={user:Rt,head:Mt,info:Wt,content:jt,logout:Pt};const Yt=()=>{const t=X(),[o,c]=a.exports.useState({});a.exports.useEffect(()=>{l()},[]);const l=async()=>{const{data:r}=await K("/user/info");c(r),setAvatar(r.avatar)},n=async()=>{localStorage.removeItem("token"),t.push("/login")};return s("div",{className:J.user,children:[s("div",{className:J.head,children:[s("div",{className:J.info,children:[s("span",{children:["\u6635\u79F0\uFF1A",o.username||"--"]}),s("span",{children:[e("img",{style:{width:30,height:30,verticalAlign:"-10px"},src:"//s.yezgea02.com/1615973630132/geqian.png",alt:""}),e("b",{children:o.signature||"\u6682\u65E0\u4E2A\u7B7E"})]})]}),e("img",{className:J.avatar,style:{width:60,height:60,borderRadius:8},src:o.avatar||"",alt:""})]}),s("div",{className:J.content,children:[e(R,{hasArrow:!0,title:"\u7528\u6237\u4FE1\u606F\u4FEE\u6539",onClick:()=>t.push("/userinfo"),icon:e("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615974766264/gxqm.png",alt:""})}),e(R,{hasArrow:!0,title:"\u91CD\u5236\u5BC6\u7801",onClick:()=>t.push("/account"),icon:e("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615974766264/zhaq.png",alt:""})}),e(R,{hasArrow:!0,title:"\u5173\u4E8E\u6211\u4EEC",onClick:()=>t.push("/about"),icon:e("img",{style:{width:20,verticalAlign:"-7px"},src:"//s.yezgea02.com/1615975178434/lianxi.png",alt:""})})]}),e(Q,{className:J.logout,block:!0,theme:"danger",onClick:n,children:"\u9000\u51FA\u767B\u5F55"})]})},zt="_data_f4sv2_1",Lt="_total_f4sv2_5",qt="_time_f4sv2_13",Ut="_date_f4sv2_35",Kt="_title_f4sv2_39",Ot="_expense_f4sv2_45",Ht="_income_f4sv2_51",Xt="_structure_f4sv2_55",Gt="_head_f4sv2_60",Jt="_tab_f4sv2_70",Qt="_active_f4sv2_80",Vt="_content_f4sv2_88",Zt="_item_f4sv2_88",es="_left_f4sv2_93",ts="_type_f4sv2_100",ss="_name_f4sv2_115",as="_right_f4sv2_124",ns="_percent_f4sv2_129",os="_momey_f4sv2_135",cs="_proportion_f4sv2_138";var p={data:zt,total:Lt,time:qt,date:Ut,title:Kt,expense:Ot,income:Ht,structure:Xt,head:Gt,tab:Jt,active:Qt,content:Vt,item:Zt,left:es,type:ts,name:ss,right:as,percent:ns,momey:os,proportion:cs};let me=null;const rs=()=>{const t=a.exports.useRef(),[o,c]=a.exports.useState(M().format("YYYY-MM")),[l,n]=a.exports.useState("expense"),[r,m]=a.exports.useState(0),[u,h]=a.exports.useState(0),[f,g]=a.exports.useState([]),[d,x]=a.exports.useState([]),[w,y]=a.exports.useState("expense");a.exports.useEffect(()=>(N(),()=>{me.dispose()}),[o]);const N=async()=>{const{data:_}=await K(`/bill/data?date=${o}`);m(_.total_expense),h(_.total_income);const k=_.total_data.filter(T=>T.pay_type==1).sort((T,U)=>U.number-T.number),P=_.total_data.filter(T=>T.pay_type==2).sort((T,U)=>U.number-T.number);g(k),x(P),console.log("income_data",P),j(w=="expense"?k:P)},W=()=>{t.current&&t.current.show()},q=_=>{c(_)},D=_=>{n(_)},O=_=>{y(_),j(_=="expense"?f:d)},j=_=>{echarts&&(me=echarts.init(document.getElementById("proportion")),me.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{data:_.map(k=>k.type_name)},series:[{name:"\u652F\u51FA",type:"pie",radius:"55%",data:_.map(k=>({value:k.number,name:k.type_name})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))};return s("div",{className:p.data,children:[s("div",{className:p.total,children:[s("div",{className:p.time,onClick:W,children:[e("span",{children:o}),e(Y,{className:p.date,type:"date"})]}),e("div",{className:p.title,children:"\u5171\u652F\u51FA"}),s("div",{className:p.expense,children:["\xA5",r]}),s("div",{className:p.income,children:["\u5171\u6536\u5165\xA5",u]})]}),s("div",{className:p.structure,children:[s("div",{className:p.head,children:[e("span",{className:p.title,children:"\u6536\u652F\u6784\u6210"}),s("div",{className:p.tab,children:[e("span",{onClick:()=>D("expense"),className:F({[p.expense]:!0,[p.active]:l=="expense"}),children:"\u652F\u51FA"}),e("span",{onClick:()=>D("income"),className:F({[p.income]:!0,[p.active]:l=="income"}),children:"\u6536\u5165"})]})]}),e("div",{className:p.content,children:(l=="expense"?f:d).map(_=>s("div",{className:p.item,children:[s("div",{className:p.left,children:[s("div",{className:p.type,children:[e("span",{className:F({[p.expense]:l=="expense",[p.income]:l=="income"}),children:e(CustomIcon,{type:_.type_id?ae[_.type_id].icon:1})}),e("span",{className:p.name,children:_.type_name})]}),s("div",{className:p.progress,children:["\xA5",Number(_.number).toFixed(2)||0]})]}),e("div",{className:p.right,children:e("div",{className:p.percent,children:e(De,{shape:"line",percent:Number(_.number/Number(l=="expense"?r:u)*100).toFixed(2),theme:"primary"})})})]},_.type_id))}),s("div",{className:p.proportion,children:[s("div",{className:p.head,children:[e("span",{className:p.title,children:"\u6536\u652F\u6784\u6210"}),s("div",{className:p.tab,children:[e("span",{onClick:()=>O("expense"),className:F({[p.expense]:!0,[p.active]:w=="expense"}),children:"\u652F\u51FA"}),e("span",{onClick:()=>O("income"),className:F({[p.income]:!0,[p.active]:w=="income"}),children:"\u6536\u5165"})]})]}),e("div",{id:"proportion"})]})]}),e(ne,{ref:t,mode:"month",onSelect:q})]})},is="_container_10aj2_1",ls="_border_bottom_10aj2_4",us="_head_10aj2_7",ds="_body_10aj2_18",ps="_color_primary_10aj2_18",ms="_check_10aj2_21",hs="_login_button_10aj2_27",_s="_tab_10aj2_31",fs="_is_active_10aj2_41",ys="_form_10aj2_45";var A={container:is,border_bottom:ls,head:us,body:ds,color_primary:ps,check:ms,login_button:hs,tab:_s,is_active:fs,form:ys};const vs=()=>{const[t,o]=a.exports.useState("login"),[c,l]=a.exports.useState(""),[n,r]=a.exports.useState(""),[m,u]=a.exports.useState(""),[h,f]=a.exports.useState(""),[g,d]=a.exports.useState(!1),x=a.exports.useCallback(y=>{u(y)},[]),w=async()=>{if(!c){b.show("\u8BF7\u8F93\u5165\u8D26\u53F7");return}if(!n){b.show("\u8BF7\u8F93\u5165\u5BC6\u7801");return}if(!g){b.show("\u8BF7\u52FE\u9009\u7528\u6237\u534F\u8BAE");return}if(t==="login"){let y=await $.post("/user/login",{username:c,password:n});y.code&&(b.show("\u767B\u9646\u6210\u529F"),localStorage.setItem("token",y.data.token),window.location.href="/")}else{if(!h){b.show("\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801");return}if(h!==m){b.show("\u9A8C\u8BC1\u7801\u9519\u8BEF");return}let y=await $.post("/user/register",{username:c,password:n});y.code&&(b.show(y.msg),globalThis.type="register")}};return s("div",{className:A.container,children:[e(ve,{left:e(E,{type:"icon-fanhui",onClick:()=>window.history.back()}),title:"\u767B\u5F55"}),e("div",{className:A.head}),s("div",{className:A.body,children:[s("div",{className:A.tab,children:[e("span",{onClick:()=>{o("login")},className:t==="login"?A.is_active:null,children:"\u767B\u5F55"}),e("span",{onClick:()=>{o("register")},className:t==="register"?A.is_active:null,children:"\u6CE8\u518C"})]}),s("div",{className:A.form,children:[e("div",{className:A.border_bottom,children:e(R,{icon:e(E,{type:"icon-user"}),children:e(L,{onChange:y=>{l(y)},clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",value:c})})}),e("div",{className:A.border_bottom,children:e(R,{icon:e(E,{type:"icon-safetycertificate"}),children:e(L,{onChange:y=>{r(y)},clearable:!0,type:"password",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",value:n})})}),t=="register"?e("div",{className:A.border_bottom,children:s(R,{icon:e(E,{type:"icon-lock"}),children:[e(L,{maxLength:"4",onChange:y=>{f(y)},clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u56FE\u5F62\u7801",value:h}),e(Te,{onChange:x,charNum:4,bgColor:"#f5f5f5"})]})}):null,e("div",{className:A.check,children:s($e,{onClick:()=>{d(!g)},children:[e("span",{children:"\u6211\u5DF2\u9605\u8BFB\u5E76\u540C\u610F"}),e("span",{children:"\u300A\u767B\u5F55\u6761\u6B3E\u300B"})]})}),e("div",{className:A.login_button,children:e(Q,{shape:"round",block:!0,theme:"primary",onClick:()=>{w()},children:t==="login"?"\u767B\u5F55":"\u6CE8\u518C"})})]})]})]})},xs="_header-warp_12wcp_1",gs="_block_12wcp_4",bs="_header_12wcp_1",ws="_more_12wcp_21";var he={headerWarp:xs,block:gs,header:bs,more:ws};const oe=({title:t=""})=>{const o=X();return e("div",{className:he.headerWarp,children:e("div",{className:he.block,children:e(ve,{className:he.header,left:e(Y,{type:"arrow-left",theme:"primary",onClick:()=>o.goBack()}),title:t})})})};oe.propTypes={title:z.string};const Ns="_detail_152kr_1",Fs="_card_152kr_8",ks="_type_152kr_16",Cs="_expense_152kr_29",Bs="_income_152kr_32",Es="_iconfont_152kr_35",Ss="_amount_152kr_38",As="_info_152kr_43",Ds="_time_152kr_48",Ts="_remark_152kr_61",$s="_operation_152kr_75",Is="_van-icon_152kr_82";var B={detail:Ns,card:Fs,type:ks,expense:Cs,income:Bs,iconfont:Es,amount:Ss,info:As,time:Ds,remark:Ts,operation:$s,vanIcon:Is};const Rs=()=>{const t=a.exports.useRef(),o=X(),c=xe(),{id:l}=Ie.parse(c.search),[n,r]=a.exports.useState({});a.exports.useEffect(()=>{m()},[]);const m=async()=>{const{data:h}=await K(`/bill/detail?id=${l}`);r(h)},u=()=>{Re.confirm({title:"\u5220\u9664",content:"\u786E\u8BA4\u5220\u9664\u8D26\u5355\uFF1F",onOk:async()=>{await V("/bill/delete",{id:l}),b.show("\u5220\u9664\u6210\u529F"),o.goBack()}})};return s("div",{className:B.detail,children:[e(oe,{title:"\u8D26\u5355\u8BE6\u60C5"}),s("div",{className:B.card,children:[s("div",{className:B.type,children:[e("span",{className:F({[B.expense]:n.pay_type==1,[B.income]:n.pay_type==2}),children:e(E,{className:B.iconfont,type:n.type_id?ae[n.type_id].icon:1})}),e("span",{children:n.type_name||""})]}),n.pay_type==1?s("div",{className:F(B.amount,B.expense),children:["-",n.amount]}):s("div",{className:F(B.amount,B.incom),children:["+",n.amount]}),s("div",{className:B.info,children:[s("div",{className:B.time,children:[e("span",{children:"\u8BB0\u5F55\u65F6\u95F4"}),e("span",{children:M(Number(n.create_date)).format("YYYY-MM-DD HH:mm")})]}),s("div",{className:B.remark,children:[e("span",{children:"\u5907\u6CE8"}),e("span",{children:n.remark||"-"})]})]}),s("div",{className:B.operation,children:[s("span",{onClick:u,children:[e(E,{type:"shanchu"}),"\u5220\u9664"]}),s("span",{onClick:()=>t.current&&t.current.show(),children:[e(E,{type:"tianjia"}),"\u7F16\u8F91"]})]})]}),e(pe,{ref:t,detail:n,onReload:m})]})},Ms="http://api.chennick.wang",Ws="_userinfo_1wov8_1",js="_item_1wov8_8",Ps="_title_1wov8_12",Ys="_avatar_1wov8_16",zs="_avatar-url_1wov8_20",Ls="_desc_1wov8_26",qs="_upload_1wov8_32",Us="_signature_1wov8_35";var I={userinfo:Ws,item:js,title:Ps,avatar:Ys,avatarUrl:zs,desc:Ls,upload:qs,signature:Us};const Ks=()=>{const t=X(),[o,c]=a.exports.useState({}),[l,n]=a.exports.useState(""),[r,m]=a.exports.useState(""),u=localStorage.getItem("token");a.exports.useEffect(()=>{h()},[]);const h=async()=>{const{data:d}=await K("/api/user/get_userinfo");c(d),n(ge(d.avatar)),m(d.signature)},f=d=>{if(console.log("file.file",d.file),d&&d.file.size>200*1024){b.show("\u4E0A\u4F20\u5934\u50CF\u4E0D\u5F97\u8D85\u8FC7 200 KB\uFF01\uFF01");return}let x=new FormData;x.append("file",d.file),$({method:"post",url:`${Ms}/upload`,data:x,headers:{"Content-Type":"multipart/form-data",Authorization:u}}).then(w=>{n(ge(w.data))})},g=async()=>{await V("/api/user/edit_userinfo",{signature:r,avatar:l}),b.show("\u4FEE\u6539\u6210\u529F"),t.goBack()};return s(te,{children:[e(oe,{title:"\u7528\u6237\u4FE1\u606F"}),s("div",{className:I.userinfo,children:[e("h1",{children:"\u4E2A\u4EBA\u8D44\u6599"}),s("div",{className:I.item,children:[e("div",{className:I.title,children:"\u5934\u50CF"}),s("div",{className:I.avatar,children:[e("img",{className:I.avatarUrl,src:l,alt:""}),s("div",{className:I.desc,children:[e("span",{children:"\u652F\u6301 jpg\u3001png\u3001jpeg \u683C\u5F0F\u5927\u5C0F 200KB \u4EE5\u5185\u7684\u56FE\u7247"}),e(Me,{className:I.filePicker,onChange:f,accept:"image/*",children:e(Q,{className:I.upload,theme:"primary",size:"xs",children:"\u70B9\u51FB\u4E0A\u4F20"})})]})]})]}),s("div",{className:I.item,children:[e("div",{className:I.title,children:"\u4E2A\u6027\u7B7E\u540D"}),e("div",{className:I.signature,children:e(L,{clearable:!0,type:"text",value:r,placeholder:"\u8BF7\u8F93\u5165\u4E2A\u6027\u7B7E\u540D",onChange:d=>m(d)})})]}),e(Q,{onClick:g,style:{marginTop:50},block:!0,theme:"primary",children:"\u4FDD\u5B58"})]})]})},Os="_account_u7md4_1",Hs="_form_u7md4_4",Xs="_btn_u7md4_9";var _e={account:Os,form:Hs,btn:Xs};const Gs=t=>{const{getFieldProps:o,getFieldError:c}=t.form,l=()=>{t.form.validateFields(async(n,r)=>{if(!n){if(console.log(r),r.newpass!=r.newpass2){b.show("\u65B0\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4");return}await V("/user/modify_pass",{old_pass:r.oldpass,new_pass:r.newpass,new_pass2:r.newpass2}),b.show("\u4FEE\u6539\u6210\u529F")}})};return s(te,{children:[e(oe,{title:"\u91CD\u5236\u5BC6\u7801"}),s("div",{className:_e.account,children:[s("div",{className:_e.form,children:[e(R,{title:"\u539F\u5BC6\u7801",children:e(L,ee({clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u539F\u5BC6\u7801"},o("oldpass",{rules:[{required:!0}]})))}),e(R,{title:"\u65B0\u5BC6\u7801",children:e(L,ee({clearable:!0,type:"text",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},o("newpass",{rules:[{required:!0}]})))}),e(R,{title:"\u786E\u8BA4\u5BC6\u7801",children:e(L,ee({clearable:!0,type:"text",placeholder:"\u8BF7\u518D\u6B64\u8F93\u5165\u65B0\u5BC6\u7801\u786E\u8BA4"},o("newpass2",{rules:[{required:!0}]})))})]}),e(Q,{className:_e.btn,block:!0,theme:"primary",onClick:l,children:"\u63D0\u4EA4"})]})]})};var Js=We()(Gs);const Qs=[{path:"/",component:It},{path:"/data",component:rs},{path:"/user",component:Yt},{path:"/login",component:vs},{path:"/detail",component:Rs},{path:"/userinfo",component:Ks},{path:"/account",component:Js}],Ne=({showTabbar:t,changeTabbar:o})=>{const c=X(),[l,n]=a.exports.useState("/");return s(se,{visible:t,activeKey:l,onChange:m=>{n(m),c.push(m)},children:[e(se.Item,{itemKey:"/",title:"\u9996\u9875",icon:e(E,{type:"icon-home"})}),e(se.Item,{itemKey:"/data",title:"\u8D26\u5355\u6982\u51B5",icon:e(E,{type:"icon-barchart"})}),e(se.Item,{itemKey:"/user",title:"\u6211\u7684",icon:e(E,{type:"icon-user"})})]})};Ne.propTypes={showNav:z.bool};function Vs(){const t=xe(),{pathname:o}=t,c=["/","/data","/user"],[l,n]=a.exports.useState(!1),[r,m]=a.exports.useState("/");a.exports.useEffect(()=>{n(c.includes(o))},[o]);const u=h=>{m(h)};return s(te,{children:[e(je,{primaryColor:"#007fff",locale:Pe,children:e(Ye,{children:Qs.map(h=>e(ze,{exact:!0,path:h.path,children:e(h.component,{})},h.path))})}),e(Ne,{changeTabbar:u,activeKey:r,showTabbar:l})]})}Le.render(e(qe.StrictMode,{children:e(Ue,{children:e(Vs,{})})}),document.getElementById("root"));
